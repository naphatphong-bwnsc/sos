<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>
  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <form id="problemForm" class="bg-white p-6 rounded-lg shadow-lg max-w-lg w-full">
    <h2 class="text-2xl font-bold mb-4">üì£ ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</h2>

    <!-- ‡∏ä‡∏∑‡πà‡∏≠ -->
    <label class="block mb-2 font-medium">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</label>
    <input type="text" name="fullname" required class="w-full border p-2 rounded mb-4">

    <!-- ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô -->
    <label class="block mb-2 font-medium">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</label>
    <input type="text" name="nickname" required class="w-full border p-2 rounded mb-4">

    <!-- ‡∏ù‡πà‡∏≤‡∏¢ -->
    <label class="block mb-2 font-medium">‡∏ù‡πà‡∏≤‡∏¢</label>
    <input type="text" name="department" required class="w-full border p-2 rounded mb-4">

    <!-- ‡∏£‡∏∏‡πà‡∏ô -->
    <label class="block mb-2 font-medium">‡∏£‡∏∏‡πà‡∏ô</label>
    <input type="text" name="generation" required class="w-full border p-2 rounded mb-4">

    <!-- ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô -->
    <label class="block mb-2 font-medium">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
    <input type="text" name="studentId" required class="w-full border p-2 rounded mb-4">

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á -->
    <label class="block mb-2 font-medium">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>
    <div class="flex space-x-2 mb-4">
      <button type="button" data-type="Line" class="contact-btn flex items-center border p-2 rounded hover:bg-gray-200">
        <i data-feather="message-square" class="mr-1"></i> Line
      </button>
      <button type="button" data-type="Facebook" class="contact-btn flex items-center border p-2 rounded hover:bg-gray-200">
        <i data-feather="facebook" class="mr-1"></i> Facebook
      </button>
      <button type="button" data-type="Phone" class="contact-btn flex items-center border p-2 rounded hover:bg-gray-200">
        <i data-feather="phone" class="mr-1"></i> ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå
      </button>
    </div>

    <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ -->
    <input type="text" id="contactInput" class="w-full border p-2 rounded mb-4 hidden" placeholder="">

    <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤ -->
    <label class="block mb-2 font-medium">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤</label>
    <input type="text" name="topic" required class="w-full border p-2 rounded mb-4">

    <!-- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
    <label class="block mb-2 font-medium">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
    <textarea name="details" required class="w-full border p-2 rounded mb-4"></textarea>

    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
  </form>

<script>
  feather.replace();

  const form = document.getElementById("problemForm");
  const contactBtns = document.querySelectorAll(".contact-btn");
  const contactInput = document.getElementById("contactInput");

  let selectedType = "";
  const webhookUrl = "https://chat.googleapis.com/v1/spaces/AAAAOvT7p_4/messages?key=AIzaSyDdI0hCZtE6vySjMm-WEfRq3CPzqKqqsHI&token=HFVoBODw7Vz7OzGPQcnm7S8afs48mrbMQ0rH-g1AYo0";

  // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á
  contactBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      contactBtns.forEach(b => b.classList.remove("bg-blue-100", "border-blue-500"));
      btn.classList.add("bg-blue-100", "border-blue-500");
      selectedType = btn.dataset.type;
      contactInput.placeholder = `‡∏Å‡∏£‡∏≠‡∏Å${selectedType}‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì`;
      contactInput.classList.remove("hidden");
    });
  });

  // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if (!selectedType) {
      Swal.fire({
        icon: 'warning',
        title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠'
      });
      return;
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if (!contactInput.value.trim()) {
      Swal.fire({
        icon: 'warning',
        title: `‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å${selectedType}‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì`
      });
      return;
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ
    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    Swal.fire({
      title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...',
      allowOutsideClick: false,
      didOpen: () => Swal.showLoading()
    });

    const formData = new FormData(form);
    formData.set("contact", `${selectedType}: ${contactInput.value}`);
    const data = {};
    formData.forEach((value, key) => data[key] = value);

    const message = {
      text: `üì£ ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö @BWNSC\n\nüë§ ‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•: ${data.fullname}\nüß∏ ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô: ${data.nickname}\nüè¢ ‡∏ù‡πà‡∏≤‡∏¢: ${data.department}\nüéì ‡∏£‡∏∏‡πà‡∏ô: ${data.generation}\nüÜî ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ${data.studentId}\nüì± ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: ${data.contact}\nüß© ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ${data.topic}\nüìù ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ${data.details}\nüÜò‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô`
    };

    try {
      const res = await fetch(webhookUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(message),
      });

      if (res.ok) {
        Swal.fire({
          icon: 'success',
          title: '‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
          text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö',
          confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á'
        });
        form.reset();
        contactInput.classList.add("hidden");
        selectedType = "";
        contactBtns.forEach(b => b.classList.remove("bg-blue-100", "border-blue-500"));
      } else {
        throw new Error();
      }
    } catch {
      Swal.fire({
        icon: 'error',
        title: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',
        text: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'
      });
    }
  });
</script>
</body>
</html>
