<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Sign-In API -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Sarabun', sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Google Login Protection -->
    <div id="loginScreen" class="fixed inset-0 bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-sm mx-4">
            <div class="text-center mb-6">
                <img src="https://data.bwnsc.in.th/sc.png" alt="BWNSC Logo" class="w-16 h-16 mx-auto mb-4 rounded-full">
                <h2 class="text-xl font-bold text-gray-800 mb-2">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                <p class="text-gray-600 text-sm">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google Account</p>
            </div>
            
            <!-- Google Sign-In Button -->
            <div id="g_id_onload"
                 data-client_id="568612861935-v4fb8pii5mtvibnfsebe1a5ob608eo0c.apps.googleusercontent.com"
                 data-context="signin"
                 data-ux_mode="popup"
                 data-callback="handleCredentialResponse"
                 data-auto_prompt="false">
            </div>
            
            <div class="g_id_signin w-full mb-4" 
                 data-type="standard"
                 data-shape="rectangular"
                 data-theme="outline"
                 data-text="signin_with"
                 data-size="large"
                 data-logo_alignment="left"
                 data-width="100%">
            </div>
            
            <div class="text-center">
                <p class="text-xs text-gray-500">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏†‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
            </div>
            
            <div id="loginError" class="hidden mt-3 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700 text-sm text-center">
                ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
            </div>
            
            <div id="loginSuccess" class="hidden mt-3 p-3 bg-green-100 border border-green-300 rounded-lg text-green-700 text-sm text-center">
                <div class="flex items-center justify-center space-x-2">
                    <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"></div>
                    <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...</span>
                </div>
            </div>
        </div>
    </div>

    <div id="mainContent" class="container mx-auto px-2 py-4 hidden">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-4 mb-6">
            <img src="https://data.bwnsc.in.th/sc.png" alt="BWNSC Logo" class="w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-3 sm:mb-4 rounded-full">
            <h1 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2 px-2 text-center">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤</h1>
            <p class="text-base sm:text-lg text-blue-600 font-semibold text-center">üìã ‡∏™‡∏†‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡∏∏‡∏ç‡∏ß‡∏±‡∏í‡∏ô‡∏≤</p>
        </div>



        <!-- Messages Cards -->
        <div class="bg-white rounded-lg shadow-lg p-4">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold text-gray-800">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</h2>
                <span id="messageCount" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
            </div>
            <div id="messagesContainer" class="space-y-4">
                <!-- Sample Message Cards -->
                <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h3 class="font-semibold text-gray-800 text-lg">‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ (‡∏ä‡∏≤‡∏¢)</h3>
                            <p class="text-sm text-gray-600">‡∏£‡∏´‡∏±‡∏™: 38710 | ‡∏ù‡πà‡∏≤‡∏¢: ‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ | ‡∏£‡∏∏‡πà‡∏ô: 65</p>
                        </div>
                        <span class="text-xs text-gray-500">15/01/2024 14:30</span>
                    </div>
                    
                    <div class="mb-3">
                        <p class="font-medium text-gray-700 mb-1">‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</p>
                        <p class="text-sm text-gray-600 mb-2">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ</p>
                        <p class="text-xs text-gray-500">üìß 38710@bwnsc.in.th</p>
                    </div>
                    
                    <div class="flex justify-between items-center">
                        <select class="status-select px-3 py-2 text-sm rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 bg-yellow-100 text-yellow-800 font-medium" data-student-id="38710" data-email="38710@bwnsc.in.th" data-name="‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ">
                            <option value="‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£" selected>‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                            <option value="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                            <option value="‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
                        </select>
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="toggleDetails(this)">
                            ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚ñº
                        </button>
                    </div>
                    
                    <div class="hidden mt-3 pt-3 border-t border-gray-300 text-sm text-gray-600 details-section">
                        <div class="grid grid-cols-2 gap-2">
                            <div><strong>‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:</strong> ‡∏≠‡∏µ‡πÄ‡∏°‡∏•</div>
                            <div><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:</strong> 38710@bwnsc.in.th</div>
                        </div>
                    </div>
                </div>

                <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h3 class="font-semibold text-gray-800 text-lg">‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏´‡∏ç‡∏¥‡∏á)</h3>
                            <p class="text-sm text-gray-600">‡∏£‡∏´‡∏±‡∏™: 64025 | ‡∏ù‡πà‡∏≤‡∏¢: ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° | ‡∏£‡∏∏‡πà‡∏ô: 64</p>
                        </div>
                        <span class="text-xs text-gray-500">15/01/2024 16:45</span>
                    </div>
                    
                    <div class="mb-3">
                        <p class="font-medium text-gray-700 mb-1">‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</p>
                        <p class="text-sm text-gray-600 mb-2">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏£‡∏≤‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</p>
                        <p class="text-xs text-gray-500">üì± 081-234-5678</p>
                    </div>
                    
                    <div class="flex justify-between items-center">
                        <select class="status-select px-3 py-2 text-sm rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 bg-blue-100 text-blue-800 font-medium" data-student-id="64025" data-email="somying@email.com" data-name="‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
                            <option value="‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                            <option value="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£" selected>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                            <option value="‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
                        </select>
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="toggleDetails(this)">
                            ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚ñº
                        </button>
                    </div>
                    
                    <div class="hidden mt-3 pt-3 border-t border-gray-300 text-sm text-gray-600 details-section">
                        <div class="grid grid-cols-2 gap-2">
                            <div><strong>‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:</strong> ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</div>
                            <div><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:</strong> 081-234-5678</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <footer class="py-6 sm:py-8 border-t border-gray-200 mt-8 sm:mt-12">
            <div class="text-center px-4">
                <div class="flex items-center justify-center mb-4">
                    <img src="https://data.bwnsc.in.th/sc.png" alt="BWNSC Logo" class="w-6 h-6 sm:w-8 sm:h-8 rounded mr-2">
                    <span class="text-gray-800 font-medium text-sm sm:text-base">‡∏™‡∏†‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡∏∏‡∏ç‡∏ß‡∏±‡∏í‡∏ô‡∏≤</span>
                </div>
                <div class="flex justify-center space-x-6 mb-4">
                    <a href="https://www.facebook.com/CouncilBoon" class="text-gray-600 hover:text-blue-600 transition-colors text-lg">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.instagram.com/bwnsc_official/?hl=th" class="text-gray-600 hover:text-pink-600 transition-colors text-lg">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="mailto:scbwn@boon.ac.th" class="text-gray-600 hover:text-blue-600 transition-colors text-lg">
                        <i class="fas fa-envelope"></i>
                    </a>
                    <a href="https://www.bwnsc.in.th" class="text-gray-600 hover:text-blue-600 transition-colors text-lg">
                        <i class="fas fa-globe"></i>
                    </a>
                </div>
                <p class="text-gray-500 text-xs sm:text-sm">¬© 2025 ‡∏™‡∏†‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡∏∏‡∏ç‡∏ß‡∏±‡∏í‡∏ô‡∏≤ - ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</p>
                <p class="text-gray-500 text-xs sm:text-sm mt-1">
                    Developed by <span class="font-medium text-gray-700">FNPHAT</span>
                </p>
            </div>
        </footer>
    </div>

    <!-- Email Modal -->
    <div id="emailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg p-4 w-full max-w-sm">
            <h3 class="text-lg font-semibold text-gray-800 mb-4 text-center">‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
            <div id="emailContent" class="mb-4 p-3 bg-gray-50 rounded-lg text-sm">
                <!-- Email content will be inserted here -->
            </div>
            <div class="flex space-x-3">
                <button id="cancelEmail" class="flex-1 py-3 px-4 text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg font-medium transition-colors">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button id="sendEmail" class="flex-1 py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors">‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•</button>
            </div>
        </div>
    </div>

    <script>
        let messages = [];
        let emailLog = [];

        // Authorized email domains/addresses
        const authorizedEmails = [
            'admin@bwnsc.in.th',
            'scbwn@boon.ac.th',
            'president@bwnsc.in.th',
            'vicepresident@bwnsc.in.th',
            'secretary@bwnsc.in.th',
            // Add more authorized emails here
        ];

        // Google Sign-In callback function
        function handleCredentialResponse(response) {
            const errorDiv = document.getElementById('loginError');
            const successDiv = document.getElementById('loginSuccess');
            
            try {
                // Decode JWT token to get user info
                const payload = JSON.parse(atob(response.credential.split('.')[1]));
                const userEmail = payload.email;
                const userName = payload.name;
                
                // Check if user is authorized
                if (authorizedEmails.includes(userEmail) || userEmail.endsWith('@bwnsc.in.th')) {
                    // Show loading state
                    successDiv.classList.remove('hidden');
                    errorDiv.classList.add('hidden');
                    
                    // Successful login
                    setTimeout(() => {
                        document.getElementById('loginScreen').classList.add('hidden');
                        document.getElementById('mainContent').classList.remove('hidden');
                        
                        // Show welcome message
                        setTimeout(() => {
                            alert(`‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\n‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${userName}\n${userEmail}`);
                        }, 500);
                    }, 1500);
                } else {
                    // Unauthorized user
                    errorDiv.textContent = '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
                    errorDiv.classList.remove('hidden');
                    successDiv.classList.add('hidden');
                }
            } catch (error) {
                console.error('Error processing Google Sign-In:', error);
                errorDiv.textContent = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
                errorDiv.classList.remove('hidden');
                successDiv.classList.add('hidden');
            }
        }

        // Make function globally available
        window.handleCredentialResponse = handleCredentialResponse;

        // Initialize status colors
        function updateStatusColors() {
            document.querySelectorAll('.status-select').forEach(select => {
                const value = select.value;
                select.className = 'status-select px-3 py-1 text-sm rounded-full border-0 focus:ring-2 focus:ring-blue-500 ';
                
                if (value === '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£') {
                    select.className += 'bg-yellow-100 text-yellow-800';
                } else if (value === '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£') {
                    select.className += 'bg-blue-100 text-blue-800';
                } else if (value === '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô') {
                    select.className += 'bg-green-100 text-green-800';
                }
            });
        }



        // Toggle details function
        function toggleDetails(button) {
            const card = button.closest('.border');
            const details = card.querySelector('.details-section');
            const isHidden = details.classList.contains('hidden');
            
            if (isHidden) {
                details.classList.remove('hidden');
                button.textContent = '‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚ñ≤';
            } else {
                details.classList.add('hidden');
                button.textContent = '‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚ñº';
            }
        }





        function attachStatusChangeListener(select) {
            select.addEventListener('change', function() {
                const previousValue = this.getAttribute('data-previous-value') || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£';
                const newValue = this.value;
                const studentId = this.getAttribute('data-student-id');
                const email = this.getAttribute('data-email');
                const name = this.getAttribute('data-name');

                // Update colors
                updateStatusColors();

                // Check if status changed from "‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£" to "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô"
                if (previousValue === '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' && newValue === '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô') {
                    showEmailModal(studentId, email, name);
                }

                this.setAttribute('data-previous-value', newValue);
            });

            // Set initial previous value
            select.setAttribute('data-previous-value', select.value);
        }

        function showEmailModal(studentId, email, name) {
            const modal = document.getElementById('emailModal');
            const content = document.getElementById('emailContent');
            
            content.innerHTML = `
                <div class="text-sm">
                    <p><strong>‡∏ñ‡∏∂‡∏á:</strong> ${email}</p>
                    <p><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> ${name}</p>
                    <p><strong>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:</strong> ${studentId}</p>
                    <hr class="my-3">
                    <p><strong>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠:</strong> ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° - ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</p>
                    <p><strong>‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤:</strong></p>
                    <div class="bg-white p-3 rounded border mt-2">
                        ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ${name}<br><br>
                        ‡∏Ç‡∏≠‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô (‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: ${studentId}) ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß<br><br>
                        ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö @BWNSC ‡∏ú‡πà‡∏≤‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á:<br>
                        <a href="https://forms.gle/survey-link" class="text-blue-600 underline">‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏∂‡∏á‡∏û‡∏≠‡πÉ‡∏à</a><br><br>
                        ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£<br>
                        ‡∏™‡∏†‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ö‡∏∏‡∏ç‡∏ß‡∏±‡∏í‡∏ô‡∏≤
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');

            // Store data for sending
            modal.setAttribute('data-student-id', studentId);
            modal.setAttribute('data-email', email);
            modal.setAttribute('data-name', name);
        }

        // Modal event listeners
        document.getElementById('cancelEmail').addEventListener('click', function() {
            document.getElementById('emailModal').classList.add('hidden');
            document.getElementById('emailModal').classList.remove('flex');
        });

        document.getElementById('sendEmail').addEventListener('click', function() {
            const modal = document.getElementById('emailModal');
            const email = modal.getAttribute('data-email');
            
            // Close modal
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            
            // Show success message
            alert(`‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á ${email} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);
        });



        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateStatusColors();
            
            // Attach listeners to existing selects
            document.querySelectorAll('.status-select').forEach(select => {
                attachStatusChangeListener(select);
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97096573741d2705',t:'MTc1NTQzNjA2Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
